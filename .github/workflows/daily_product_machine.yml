name: Gumroad_Final_Success_2026
on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Create Product via API
        run: |
          # рд╣рдордиреЗ рдбреЗрдЯрд╛ рднреЗрдЬрдиреЗ рдХрд╛ рддрд░реАрдХрд╛ рдкреВрд░реА рддрд░рд╣ рдмрджрд▓ рджрд┐рдпрд╛ рд╣реИ (JSON рдлреЙрд░реНрдореЗрдЯ)
          # рдпрд╣ 404 рдПрд░рд░ рдХреЛ рджрд░рдХрд┐рдирд╛рд░ рдХрд░рдиреЗ рдХрд╛ рд╕рдмрд╕реЗ рдЖрдзреБрдирд┐рдХ рддрд░реАрдХрд╛ рд╣реИ
          RESPONSE=$(curl -s -X POST "https://api.gumroad.com/v2/products" \
            -H "Authorization: Bearer ${{ secrets.GUMROAD_TOKEN }}" \
            -H "Content-Type: application/json" \
            -d '{
              "name": "Victory_Machine_Product",
              "price_cents": 1000,
              "description": "Successfully Created via Automated Machine",
              "published": true
            }')

          echo "Response: $RESPONSE"

          # рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рдкрд░ рд╕рд╛рдл рд╕рдВрджреЗрд╢
          if [[ $RESPONSE == *"\"success\":true"* ]]; then
             MSG="тЬЕ рдмрдзрд╛рдИ рд╣реЛ! рдЖрдкрдХреА рдорд╢реАрди рдЪрд╛рд▓реВ рд╣реЛ рдЧрдИред рдкреНрд░реЛрдбрдХреНрдЯ рдЧрдорд░реЛрдб рдкрд░ рд▓рд╛рдЗрд╡ рд╣реИред"
          else
             # рдЕрдЧрд░ рдЕрднреА рднреА рдХрдЪрд░рд╛ рдЖрдП, рддреЛ рдпрд╣ рдЙрд╕реЗ рдЫреЛрдЯрд╛ рдХрд░рдХреЗ рджрд┐рдЦрд╛рдПрдЧрд╛
             CLEAN=$(echo $RESPONSE | head -c 100)
             MSG="ЁЯУК рд░рд┐рдкреЛрд░реНрдЯ: $CLEAN"
          fi

          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_TOKEN }}/sendMessage" \
          -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
          -d text="$MSG"
