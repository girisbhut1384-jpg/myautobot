name: Gumroad_Final_Winner_2026
on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Create Product
        run: |
          # ‡§π‡§Æ‡§®‡•á URL ‡§ï‡•á ‡§Ü‡§ñ‡§ø‡§∞ ‡§Æ‡•á‡§Ç ‡§∏‡•á /v2/ ‡§π‡§ü‡§æ‡§ï‡§∞ ‡§∏‡•Ä‡§ß‡§æ ‡§∞‡§æ‡§∏‡•ç‡§§‡§æ ‡§Ü‡•õ‡§Æ‡§æ‡§Ø‡§æ ‡§π‡•à
          # ‡§î‡§∞ ‡§ü‡•ã‡§ï‡§® ‡§ï‡•ã ‡§∏‡§¨‡§∏‡•á ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§ ‡§§‡§∞‡•Ä‡§ï‡•á ‡§∏‡•á ‡§≠‡•á‡§ú‡§æ ‡§π‡•à
          RESPONSE=$(curl -s -X POST "https://api.gumroad.com/v2/products" \
            -H "Authorization: Bearer ${{ secrets.GUMROAD_TOKEN }}" \
            -d "name=Automatic_Success_$(date +%H%M)" \
            -d "price=1000" \
            -d "description=Official_Automated_Product" \
            -d "published=true")

          echo "Full Response: $RESPONSE"

          # ‡§ü‡•á‡§≤‡•Ä‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§™‡§∞ ‡§Æ‡•à‡§∏‡•á‡§ú - ‡§Ö‡§¨ HTML ‡§ï‡§ö‡§∞‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§Ü‡§è‡§ó‡§æ
          if [[ $RESPONSE == *"success\":true"* ]]; then
             MSG="‚úÖ ‡§ß‡§Æ‡§æ‡§ï‡§æ! ‡§™‡•ç‡§∞‡•ã‡§°‡§ï‡•ç‡§ü ‡§Ö‡§¨ ‡§Ü‡§™‡§ï‡•á Gumroad ‡§™‡§∞ ‡§≤‡§æ‡§á‡§µ ‡§π‡•à‡•§"
          elif [[ $RESPONSE == *"<!DOCTYPE html"* ]]; then
             MSG="‚ùå ‡§Ö‡§≠‡•Ä ‡§≠‡•Ä 404 ‡§Ü ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‡§á‡§∏‡§ï‡§æ ‡§Æ‡§§‡§≤‡§¨ ‡§π‡•à 'v2' ‡§∂‡§¨‡•ç‡§¶ ‡§π‡§ü‡§æ‡§®‡§æ ‡§π‡•ã‡§ó‡§æ‡•§"
          else
             MSG="üìä ‡§ó‡§Æ‡§∞‡•ã‡§° ‡§ï‡§æ ‡§ú‡§µ‡§æ‡§¨: $RESPONSE"
          fi

          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_TOKEN }}/sendMessage" \
          -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
          -d text="$MSG"
