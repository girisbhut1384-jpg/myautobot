name: Final_Expert_Solution_2026
on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Create Product
        run: |
          # ‡§è‡§ï‡•ç‡§∏‡§™‡§∞‡•ç‡§ü ‡§§‡§∞‡•Ä‡§ï‡§æ: URL ‡§ï‡•á ‡§Ö‡§Ç‡§§ ‡§Æ‡•á‡§Ç ‡§∏‡•ç‡§≤‡•à‡§∂ ‡§î‡§∞ ‡§ü‡•ã‡§ï‡§® ‡§≠‡•á‡§ú‡§®‡•á ‡§ï‡§æ ‡§®‡§Ø‡§æ ‡§§‡§∞‡•Ä‡§ï‡§æ
          RESPONSE=$(curl -s -X POST "https://api.gumroad.com/v2/products/" \
            --header "Authorization: Bearer ${{ secrets.GUMROAD_TOKEN }}" \
            --header "Content-Type: application/json" \
            --data '{
              "name": "Success_Product_Final",
              "price_cents": 1000,
              "description": "Automated via API",
              "published": true
            }')

          echo "Full Response: $RESPONSE"

          # ‡§ü‡•á‡§≤‡•Ä‡§ó‡•ç‡§∞‡§æ‡§Æ ‡§™‡§∞ ‡§∏‡§æ‡§´‡§º ‡§∏‡§Ç‡§¶‡•á‡§∂
          if [[ $RESPONSE == *"\"success\":true"* ]]; then
             MSG="‚úÖ ‡§Æ‡§∂‡•Ä‡§® ‡§ö‡§æ‡§≤‡•Ç ‡§π‡•ã ‡§ó‡§à ‡§π‡•à! ‡§™‡•ç‡§∞‡•ã‡§°‡§ï‡•ç‡§ü ‡§¨‡§® ‡§ó‡§Ø‡§æ‡•§"
          elif [[ $RESPONSE == *"<!DOCTYPE html"* ]]; then
             # ‡§Ö‡§ó‡§∞ ‡§Ö‡§≠‡•Ä ‡§≠‡•Ä 404 ‡§Ü‡§è, ‡§§‡•ã ‡§Ø‡•á ‡§¨‡§ø‡§®‡§æ v2 ‡§µ‡§æ‡§≤‡§æ ‡§´‡§æ‡§á‡§®‡§≤ ‡§ü‡•ç‡§∞‡§æ‡§à ‡§π‡•à
             MSG="‚ö†Ô∏è ‡§Ö‡§≠‡•Ä ‡§≠‡•Ä ‡§™‡•Å‡§∞‡§æ‡§®‡§æ ‡§≤‡§ø‡§Ç‡§ï ‡§´‡•á‡§≤ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à‡•§ ‡§π‡§Æ‡•á‡§Ç ‡§¨‡§ø‡§®‡§æ v2 ‡§µ‡§æ‡§≤‡§æ ‡§≤‡§ø‡§Ç‡§ï ‡§ö‡§æ‡§π‡§ø‡§è‡•§"
          else
             MSG="üìä ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü: $RESPONSE"
          fi

          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_TOKEN }}/sendMessage" \
          -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
          -d text="$MSG"
