name: Firewall_Bypass_Strategy
on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Bypass Firewall and Test Custom URL
        run: |
          # ‡§π‡§Æ‡§®‡•á User-Agent ‡§ï‡•ã Chrome ‡§¨‡•ç‡§∞‡§æ‡§â‡§ú‡§º‡§∞ ‡§ú‡•à‡§∏‡§æ ‡§¨‡§®‡§æ ‡§¶‡§ø‡§Ø‡§æ ‡§π‡•à
          # ‡§î‡§∞ URL ‡§ï‡•ã 'v2' ‡§ï‡•á ‡§∏‡•Ä‡§ß‡•á ‡§∞‡§æ‡§∏‡•ç‡§§‡•á ‡§™‡§∞ ‡§∞‡§ñ‡§æ ‡§π‡•à
          RESPONSE=$(curl -s -X POST "https://api.gumroad.com/v2/products" \
            -H "Authorization: Bearer ${{ secrets.GUMROAD_TOKEN }}" \
            -H "User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36" \
            -H "Accept: application/json" \
            -d "name=Firewall_Success_$(date +%H%M)" \
            -d "price_cents=1000" \
            -d "description=Bypassing firewall successfully" \
            -d "published=true")

          echo "Response: $RESPONSE"

          if [[ $RESPONSE == *"\"success\":true"* ]]; then
             MSG="‚úÖ ‡§Ö‡§µ‡§ø‡§∂‡•ç‡§µ‡§∏‡§®‡•Ä‡§Ø! ‡§´‡§æ‡§Ø‡§∞‡§µ‡•â‡§≤ ‡§ü‡•Ç‡§ü ‡§ó‡§Ø‡§æ ‡§î‡§∞ ‡§∞‡§æ‡§∏‡•ç‡§§‡§æ ‡§Æ‡§ø‡§≤ ‡§ó‡§Ø‡§æ‡•§ ‡§ö‡•á‡§ï ‡§ï‡§∞‡•á‡§Ç!"
          else
             # ‡§Ö‡§ó‡§∞ ‡§Ö‡§≠‡•Ä ‡§≠‡•Ä 404 ‡§Ü‡§è, ‡§§‡•ã ‡§π‡§Æ‡•á‡§Ç ‡§∏‡§æ‡§´‡§º ‡§™‡§§‡§æ ‡§ö‡§≤ ‡§ú‡§æ‡§è‡§ó‡§æ ‡§ï‡§ø URL ‡§π‡•Ä ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ ‡§π‡•à
             MSG="üìä ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü: $(echo $RESPONSE | head -c 100)"
          fi

          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_TOKEN }}/sendMessage" \
          -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
          -d text="$MSG"
