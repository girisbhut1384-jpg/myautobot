name: Gumroad_Final_Victory_2026
on:
  workflow_dispatch:

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Create Product via API
        run: |
          # рдЖрдкрдХреЗ рдЯреЛрдХрди рдФрд░ рдмреНрд░рд╛рдЙрдЬрд╝рд░ рдЯреЗрд╕реНрдЯ рдХреЗ рд╣рд┐рд╕рд╛рдм рд╕реЗ рд╕рдмрд╕реЗ рд╕рдЯреАрдХ рддрд░реАрдХрд╛
          RESPONSE=$(curl -s -X POST "https://api.gumroad.com/v2/products" \
            -H "Authorization: Bearer ${{ secrets.GUMROAD_TOKEN }}" \
            -d "name=Victory_Product_$(date +%H%M)" \
            -d "price=1000" \
            -d "description=Success_Automated_Product" \
            -d "published=true")

          echo "Full Response: $RESPONSE"

          # рдЯреЗрд▓реАрдЧреНрд░рд╛рдо рдкрд░ рд░рд┐рдкреЛрд░реНрдЯ рднреЗрдЬрдирд╛
          if [[ $RESPONSE == *"\"success\":true"* ]]; then
             MSG="тЬЕ рдЖрдЦрд┐рд░рдХрд╛рд░! рдорд╢реАрди рдиреЗ рдХрд╛рдо рдХрд░ рджрд┐рдпрд╛ред рдЧрдорд░реЛрдб рдкрд░ рдЪреЗрдХ рдХрд░реЗрдВ!"
          else
             MSG="ЁЯУК рдлрд╛рдЗрдирд▓ рд░рд┐рдкреЛрд░реНрдЯ: $RESPONSE"
          fi

          curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_TOKEN }}/sendMessage" \
          -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
          -d text="$MSG"
